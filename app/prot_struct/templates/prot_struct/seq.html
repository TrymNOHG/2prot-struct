{% extends "prot_struct/base.html" %}
{% block content %}
<div class="min-h-screen bg-gray-100 flex items-start justify-center py-12 px-4">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-12 w-full max-w-6xl">

    <form action="" method="post" class="bg-white p-6 rounded-2xl shadow-md space-y-4">
      {% csrf_token %}

      {% for field in form %}
      <div>
        <label for="{{ field.id_for_label }}" class="block mb-1 text-sm font-medium text-gray-700">
          {{ field.label }}
        </label>
        {{ field }}
        {% if field.errors %}
        <p class="text-red-500 text-xs mt-1">{{ field.errors|striptags }}</p>
        {% endif %}
      </div>
      {% endfor %}

      <button type="submit" class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow">
        Predict
      </button>
    </form>

    {% if hist_data %}
    <div class="flex items-end justify-center space-x-4 bg-white p-6 rounded-2xl shadow-md h-[300px] overflow-y-auto">
      {% for label, height in hist_data.items %}
      <!-- multiplier = MAX_HEIGHT / max_val -->
      <div class="flex flex-col items-center space-y-1">
        <div class="absolute -top-8 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-700 text-white text-xs rounded py-1 px-2 pointer-events-none">
            {{ label }}: {{ height }}
        </div>
        <div
          class="w-10 rounded-t-lg transition-all duration-300"
          style="
            height: {% widthratio height max_val 200 %}px;
            background-color: {% if height == max_val %}#16a34a{% else %}#3b82f6{% endif %};"
          title="{{ label }}: {{ height }}px"
        ></div>
        <span class="text-xs font-medium text-gray-700">{{ label }}</span>
      </div>
      {% endfor %}

    </div>
    {% endif %}
    

  </div>
</div>
{% endblock %}

